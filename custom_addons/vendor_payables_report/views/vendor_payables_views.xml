<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- Tree inherit view: vendor name, amount owed -->
    <record id="view_res_partner_tree_inherit_vendor" model="ir.ui.view">
        <field name="name">res.partner.tree.inherit.vendor</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//list" position="inside">
                <!-- Place them after amount_total column; adjust position if needed -->
                <field name="currency_id" invisible="1"/>
                <field name="vendor_due_amount" widget="monetary" options="{'currency_field': 'currency_id', 'current': True}" sum="Total" />
            </xpath>
        </field>
    </record>

    <!-- Kanban (optional) -->
    <record id="view_res_partner_vendor_payables_kanban" model="ir.ui.view">
      <field name="name">res.partner.vendor.payables.kanban</field>
      <field name="model">res.partner</field>
      <field name="arch" type="xml">
        <kanban>
          <templates>
            <t t-name="kanban-box">
              <div class="o_kanban_record_top">
                <field name="name"/>
              </div>
              <div class="o_kanban_record_body">
                <div><strong>Total Owed:</strong> <span t-esc="record.stored_vendor_due_amount.value"/></div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <!-- Graph view -->
    <!-- <record id="view_res_partner_vendor_payables_graph" model="ir.ui.view">
      <field name="name">res.partner.vendor.payables.graph</field>
      <field name="model">res.partner</field>
      <field name="arch" type="xml">
        <graph string="Vendor Debt" type="bar">
            <field name="name" type="row"/>
            <field name="stored_vendor_due_amount" type="measure"/>
        </graph>
      </field>
    </record> -->

    <!-- Pivot view -->
    <!-- <record id="view_res_partner_vendor_payables_pivot" model="ir.ui.view">
      <field name="name">res.partner.vendor.payables.pivot</field>
      <field name="model">res.partner</field>
      <field name="arch" type="xml">
        <pivot string="Vendor Payables Report">
          <field name="name" type="row"/>
          <field name="stored_vendor_due_amount" type="measure"/>
        </pivot>
      </field>
    </record> -->

    <!-- Action & Menu -->
    <record id="vendor_payables_report_action" model="ir.actions.act_window">
        <field name="name">Vendor Payables Report</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">list,form</field>
        <!-- Show only vendors/suppliers -->
        <!-- <field name="domain">[('company_id', 'in', allowed_company_ids.ids)]</field> -->
        <field name="context">{'search_default_supplier': 1,'res_partner_search_mode': 'supplier', 'default_is_company': True, 'default_supplier_rank': 1}</field>
      </record>

      <menuitem 
          id="vendor_payables_report_menu" 
          name="Vendor Payables Report" 
          parent="account.menu_finance_reports" 
          action="vendor_payables_report_action" 
          sequence="10"/>

  </data>
</odoo>
